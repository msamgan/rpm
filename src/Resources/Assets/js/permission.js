$(function(){var a=$("#permission-form"),t=$("table"),e=$("#permission-table").DataTable({processing:!0,serverSide:!0,pageLength:20,order:[[0,"desc"]],ajax:{url:"/load/permissions"},columns:[{data:"id",name:"id"},{data:"name",name:"name"},{data:"route_name",name:"route_name"},{data:"group_name",name:"group_name"},{data:"description",name:"description"},{data:"action",name:"action"}]});a.on("submit",function(t){t.preventDefault();var i=$("#permission-save"),n="/store/permission";"edit"==i.attr("data-action")&&(n="update/permission/"+i.attr("data-id")),$.post(n,a.serialize(),function(t){t.status?(e.draw(),$("#permission-form-modal").modal("hide"),a.get(0).reset()):$.alert({theme:"dark",title:"ERROR!",content:t.message})})}),t.on("click",".edit-permission",function(){var a=$(this).data("id");$.get("/permission/"+a,function(t){if(t.status){var e=$("#permission-save");$("#name").val(t.data.name),$("#description").val(t.data.description),$("#permissionGroup").val(t.data.permission_group_id),$("#routeName").val(t.data.route_name),e.attr("data-action","edit"),e.attr("data-id",a),$("#permission-form-modal").modal("show")}})}),t.on("click",".delete-permission",function(){var a=$(this).data("id");$.confirm({theme:"dark",title:"Confirm!",content:"Are you sure!",buttons:{confirm:{btnClass:"btn-red",action:function(){$.get("/permission/delete/"+a,function(a){if(a.status)return e.draw();$.alert({theme:"dark",title:"ERROR!",content:"Oops! our bad, please try again later."})})}},cancel:function(){}}})}),$("#add-permission-btn").click(function(){var t=$("#permission-save");a.get(0).reset(),t.attr("data-action","add"),t.attr("data-id","")})});
